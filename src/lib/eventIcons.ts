import { getGroupForInterest } from '@/lib/interestGroups'

const INTEREST_EMOJI: Record<string, string> = {
  // Outdoor & Adventure
  'ĞŸĞ»Ğ°Ğ½Ğ¸Ğ½Ğ°Ñ€ÑÑ‚Ğ²Ğ¾': 'ğŸ¥¾',
  'Trekking': 'ğŸ¥¾',
  'ĞšĞ°Ñ‚ĞµÑ€ĞµĞ½Ğµ': 'ğŸ§—',
  'ĞšÑŠĞ¼Ğ¿Ğ¸Ğ½Ğ³': 'ğŸ•ï¸',
  'ĞšĞ¾Ğ»Ğ¾ĞµĞ·Ğ´ĞµĞ½Ğµ': 'ğŸš´',
  'ĞŸĞ»Ğ°Ğ½Ğ¸Ğ½ÑĞºĞ¾ ĞºĞ¾Ğ»Ğ¾ĞµĞ·Ğ´ĞµĞ½Ğµ': 'ğŸšµ',
  'ĞšĞ¾Ğ½Ğ½Ğ° ĞµĞ·Ğ´Ğ°': 'ğŸ',
  'Ğ Ğ¸Ğ±Ğ¾Ğ»Ğ¾Ğ²': 'ğŸ£',
  'ĞŸĞ°Ñ€Ğ°Ğ¿Ğ»Ğ°Ğ½ĞµÑ€Ğ¸Ğ·ÑŠĞ¼': 'ğŸª‚',
  'Ğ¤Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ Ñ Ğ´Ñ€Ğ¾Ğ½': 'ğŸš',

  // Winter Sports
  'Ğ¡ĞºĞ¸': 'ğŸ¿',
  'Ğ¡Ğ½Ğ¾ÑƒĞ±Ğ¾Ñ€Ğ´': 'ğŸ‚',

  // Fitness & Training
  'Ğ‘ÑĞ³Ğ°Ğ½Ğµ': 'ğŸƒ',
  'Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ': 'ğŸ‹ï¸',
  'ĞšÑ€Ğ¾ÑÑ„Ğ¸Ñ‚': 'ğŸ‹ï¸â€â™€ï¸',
  'Ğ™Ğ¾Ğ³Ğ°': 'ğŸ§˜',
  'ĞŸĞ¸Ğ»Ğ°Ñ‚ĞµÑ': 'ğŸ§˜',
  'ĞŸĞ»ÑƒĞ²Ğ°Ğ½Ğµ': 'ğŸŠ',
  'Ğ‘Ğ¾Ğ¹Ğ½Ğ¸ Ğ¸Ğ·ĞºÑƒÑÑ‚Ğ²Ğ°': 'ğŸ¥‹',

  // Team Sports
  'Ğ¤ÑƒÑ‚Ğ±Ğ¾Ğ»': 'âš½',
  'Ğ‘Ğ°ÑĞºĞµÑ‚Ğ±Ğ¾Ğ»': 'ğŸ€',
  'Ğ’Ğ¾Ğ»ĞµĞ¹Ğ±Ğ¾Ğ»': 'ğŸ',
  'Ğ¢ĞµĞ½Ğ¸Ñ': 'ğŸ¾',
  'Ğ‘Ğ°Ğ´Ğ¼Ğ¸Ğ½Ñ‚Ğ¾Ğ½': 'ğŸ¸',

  // Dance & Movement
  'Ğ¢Ğ°Ğ½Ñ†Ğ¸': 'ğŸ’ƒ',
  'Ğ—ÑƒĞ¼Ğ±Ğ°': 'ğŸ’ƒ',

  // Arts & Creativity
  'Ğ¤Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ': 'ğŸ“¸',
  'Ğ–Ğ¸Ğ²Ğ¾Ğ¿Ğ¸Ñ': 'ğŸ¨',
  'Ğ Ğ¸ÑÑƒĞ²Ğ°Ğ½Ğµ': 'ğŸ–Œï¸',
  'Ğ˜Ğ·ĞºÑƒÑÑ‚Ğ²Ğ¾': 'ğŸ¨',
  'Ğ ÑŠĞºĞ¾Ğ´ĞµĞ»Ğ¸Ğµ': 'ğŸ§µ',
  'Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½': 'ğŸ“',

  // Music & Performance
  'ĞœÑƒĞ·Ğ¸ĞºĞ°': 'ğŸµ',
  'ĞŸĞµĞµĞ½Ğµ': 'ğŸ¤',
  'ĞšĞ¸Ñ‚Ğ°Ñ€Ğ°': 'ğŸ¸',
  'ĞŸĞ¸Ğ°Ğ½Ğ¾': 'ğŸ¹',
  'ĞšĞ°Ñ€Ğ°Ğ¾ĞºĞµ': 'ğŸ¤',
  'Ğ¢ĞµĞ°Ñ‚ÑŠÑ€': 'ğŸ­',

  // Culture & Entertainment
  'ĞšĞ¸Ğ½Ğ¾': 'ğŸ¬',
  'ĞœÑƒĞ·ĞµĞ¸': 'ğŸ›ï¸',
  'Ğ¤Ğ¾Ğ»ĞºĞ»Ğ¾Ñ€': 'ğŸ»',
  'Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ Ñ‚Ñ€Ğ°Ğ´Ğ¸Ñ†Ğ¸Ğ¸': 'ğŸ‰',
  'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¼ĞµÑÑ‚Ğ°': 'ğŸ›ï¸',

  // Food & Drink
  'Ğ“Ğ¾Ñ‚Ğ²ĞµĞ½Ğµ': 'ğŸ³',
  'ĞšĞ°Ñ„Ğµ': 'â˜•',
  'ĞŸĞ¸Ğ²Ğ¾': 'ğŸº',
  'Ğ’Ğ¸Ğ½Ğ¾': 'ğŸ·',
  'Ğ”ĞµĞ³ÑƒÑÑ‚Ğ°Ñ†Ğ¸Ğ¸': 'ğŸ½ï¸',

  // Games & Social
  'ĞĞ°ÑÑ‚Ğ¾Ğ»Ğ½Ğ¸ Ğ¸Ğ³Ñ€Ğ¸': 'ğŸ²',
  'Ğ˜Ğ³Ñ€Ğ¸ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¸': 'ğŸƒ',
  'Ğ‘ĞµĞ»Ğ¾Ñ‚': 'ğŸƒ',
  'ĞŸĞ¾ĞºĞµÑ€': 'ğŸƒ',
  'Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ¸Ğ³Ñ€Ğ¸': 'ğŸ®',
  'Ğ“ĞµĞ¹Ğ¼Ğ¸Ğ½Ğ³': 'ğŸ®',
  'ĞĞ¾Ñ‰ĞµĞ½ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚': 'ğŸ¸',

  // Travel & Places
  'ĞŸÑŠÑ‚ÑƒĞ²Ğ°Ğ½Ğ¸Ñ': 'ğŸ§³',
  'Ğ•ĞºÑĞºÑƒÑ€Ğ·Ğ¸Ğ¸': 'ğŸ—ºï¸',
  'Ğ’Ğ¸Ñ‚Ğ¾ÑˆĞ°': 'ğŸ”ï¸',
  'Ğ Ğ¸Ğ»Ğ°': 'ğŸ”ï¸',
  'ĞŸĞ¸Ñ€Ğ¸Ğ½': 'ğŸ”ï¸',
  'Ğ‘Ğ°Ğ½ÑĞºĞ¾': 'â›·ï¸',
  'Ğ‘Ğ¾Ñ€Ğ¾Ğ²ĞµÑ†': 'â›·ï¸',
  'Ğ§ĞµÑ€Ğ½Ğ¾Ğ¼Ğ¾Ñ€Ğ¸Ğµ': 'ğŸ–ï¸',

  // Wellness & Health
  'ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ': 'ğŸ§˜',
  'Ğ¡Ğ¿Ğ°': 'â™¨ï¸',
  'ĞœĞ°ÑĞ°Ğ¶': 'ğŸ’†',
  'ĞœĞ¸Ğ½ĞµÑ€Ğ°Ğ»Ğ½Ğ¸ Ğ±Ğ°Ğ½Ğ¸': 'â™¨ï¸',
  'Ğ—Ğ´Ñ€Ğ°Ğ²Ğ¾ÑĞ»Ğ¾Ğ²ĞµĞ½ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚': 'ğŸ¥—',
  'Ğ’ĞµĞ³ĞµÑ‚Ğ°Ñ€Ğ¸Ğ°Ğ½ÑÑ‚Ğ²Ğ¾': 'ğŸ¥¦',
  'Ğ’ĞµĞ³Ğ°Ğ½ÑÑ‚Ğ²Ğ¾': 'ğŸ¥¬',

  // Animals & Pets
  'ĞšÑƒÑ‡ĞµÑ‚Ğ°': 'ğŸ¶',
  'ĞšĞ¾Ñ‚ĞºĞ¸': 'ğŸ±',
  'Ğ Ğ°Ğ·Ñ…Ğ¾Ğ´ĞºĞ¸ Ñ ĞºÑƒÑ‡ĞµÑ‚Ğ°': 'ğŸ•â€ğŸ¦º',
  'Ğ–Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ğ¸': 'ğŸ¾',

  // Learning & Development
  'Ğ•Ğ·Ğ¸Ñ†Ğ¸': 'ğŸ—£ï¸',
  'ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸': 'ğŸ‡¬ğŸ‡§',
  'Ğ§ĞµÑ‚ĞµĞ½Ğµ': 'ğŸ“–',
  'ĞŸĞ¸ÑĞ°Ğ½Ğµ': 'âœï¸',

  // Tech & Innovation
  'ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¸Ñ€Ğ°Ğ½Ğµ': 'ğŸ§‘â€ğŸ’»',
  'Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸': 'ğŸ’¡',
  'AI/ML': 'ğŸ¤–',
  'Ğ‘Ğ»Ğ¾ĞºÑ‡ĞµĞ¹Ğ½': 'â›“ï¸',
  'ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾': 'ğŸª™',

  // Professional & Networking
  'ĞŸÑ€ĞµĞ´Ğ¿Ñ€Ğ¸ĞµĞ¼Ğ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾': 'ğŸš€',
  'Ğ¡Ñ‚Ğ°Ñ€Ñ‚ÑŠĞ¿Ğ¸': 'ğŸš€',
  'Networking': 'ğŸ¤',
  'Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğ²Ğ¾Ğ»Ñ‡ĞµÑÑ‚Ğ²Ğ¾': 'ğŸ™Œ',
}

export function getEmojiForInterests(interests: { interests?: { name?: string } }[] | null | undefined): string {
  const first = interests?.[0]?.interests?.name
  if (first && INTEREST_EMOJI[first]) return INTEREST_EMOJI[first]
  if (first) {
    const group = getGroupForInterest(first)
    if (group?.emoji) return group.emoji
  }
  return 'ğŸ“'
}

export function getEmojiForEvent(e: any): string {
  // Prefer event_interests names
  if (e?.event_interests && Array.isArray(e.event_interests) && e.event_interests.length > 0) {
    return getEmojiForInterests(e.event_interests)
  }
  // Fallback: infer from title keywords (very rough)
  const t = (e?.title || '').toLowerCase()
  if (t.includes('coffee') || t.includes('ĞºĞ°Ñ„Ğµ')) return 'â˜•'
  if (t.includes('hike') || t.includes('Ğ¿Ğ»Ğ°Ğ½Ğ¸Ğ½Ğ°Ñ€')) return 'ğŸ¥¾'
  if (t.includes('yoga') || t.includes('Ğ¹Ğ¾Ğ³Ğ°')) return 'ğŸ§˜'
  return 'ğŸ“'
}